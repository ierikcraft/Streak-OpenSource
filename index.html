<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Racha</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #f4f4f4; }
        
        /* Estilo del Widget */
        .streak-badge {
            background: white; padding: 8px 16px; border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer;
            font-weight: bold; color: #888; display: flex; gap: 8px;
            transition: 0.3s;
        }
        .streak-badge.active { color: #FF9500; border: 1px solid #FF9500; }
        
        .action-btn { margin-top: 20px; padding: 15px 30px; background: black; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1rem; }
        .action-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>

    <div id="streakWidget" class="streak-badge" onclick="window.location.href='streak.html'">
        <span></span> <span id="streakCount">--</span>
    </div>

    <h1>Mi Dashboard</h1>
    <p>Haz click abajo 2 veces para simular la "Acci贸n Diaria".</p>

    <button class="action-btn" onclick="simularAccion()">Simular Acci贸n</button>

    <script type="module">
        import { StreakManager } from './js/streak-manager.js';

        // Pega tu config aqu铆 para la demo
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_PROJECT.firebaseapp.com",
            projectId: "TU_PROJECT_ID"
        };

        const streakManager = new StreakManager(firebaseConfig);
        const userId = "demo_user_001"; // ID fijo para probar

        // Cargar estado inicial
        async function load() {
            const data = await streakManager.getStreakData(userId);
            const el = document.getElementById('streakWidget');
            document.getElementById('streakCount').innerText = data.currentStreak;

            // L贸gica visual simple
            const today = new Date().toISOString().split('T')[0];
            if(data.lastMessageDate === today && data.messagesToday >= 2) {
                el.classList.add('active');
            }
        }

        // Simular acci贸n global
        window.simularAccion = async () => {
            await streakManager.incrementProgress(userId, (newStreak) => {
                alert("隆Racha Salvada! ");
            });
            load(); // Recargar UI
        };

        load();
    </script>
</body>
</html>
